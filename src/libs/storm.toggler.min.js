!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.StormToggler=e()}(this,function(){"use strict";function t(t,e){var s,a=this;this.settings=n.merge({},i,e),this.btn=t,this.docEl=document.documentElement,this.targetId=(t.getAttribute("href")||t.getAttribute("data-target")).substr(1),this.targetElement=document.getElementById(this.targetId),this.statusClass=["on--",this.targetId].join(""),this.animatingClass=["animating--",this.targetId].join(""),s=this.targetId,n.attributelist.add(this.btn,{role:"button","aria-controls":s,"aria-expanded":"false"}),n.attributelist.add(this.targetElement,{"aria-hidden":!0}),this.btn.addEventListener("click",function(t){a.toggle.call(a,t)},!1)}function e(e,i){if(0===e.length||!("querySelectorAll"in document))throw new Error("Toggler cannot be initialised, unsupported browser or no toggleable elements");var n=[];return[].slice.call(e).forEach(function(e){n.push(new t(e,i))}),n}var i={delay:200},n=require("storm.utils");return t.prototype.toggle=function(t){var e=this,i=document.querySelector("."+e.statusClass)?e.settings.delay:0;t.preventDefault(),t.stopPropagation(),n.classlist.add(this.docEl,this.animatingClass),window.setTimeout(function(){n.classlist.remove(e.docEl,e.animatingClass).toggle(e.docEl,e.statusClass),n.attributelist.toggle(e.btn,"aria-expanded"),n.attributelist.toggle(e.targetElement,"aria-hidden")},i)},{init:e}});