!function(t,s){"object"==typeof exports?module.exports=s():t.StormToggler=s()}(this,function(){"use strict";function t(t,s,e){n[s]=Object.assign(Object.create(l),{btn:t,targetId:(t.getAttribute("href")||t.getAttribute("data-target")).substr(1),settings:Object.assign({},a,e)}),n[s].init()}function s(s,e){var i=[].slice.call(document.querySelectorAll(s));if(0===i.length)throw new Error("Toggler cannot be initialised, no augmentable elements found");return i.forEach(function(s,i){t(s,i,e)}),n}function e(s,e){[].slice.call(document.querySelectorAll(s)).forEach(function(s,i){n.filter(function(t){return t.btn===s}).length||t(s,n.length,e)})}function i(){n=[]}var n=[],a={delay:200,targetLocal:!1,callback:null},l={init:function(){this.open=!1,this.targetElement=document.getElementById(this.targetId),this.classTarget=this.settings.targetLocal?this.targetElement.parentNode:document.documentElement,this.siblingBtns=[].slice.call(document.querySelectorAll('.js-toggle[href*="#'+this.targetId+'"], .js-toggle[data-target*="#'+this.targetId+'"]')),this.settings.targetLocal?(this.statusClass="active",this.animatingClass="animating"):(this.statusClass=["on--",this.targetId].join(""),this.animatingClass=["animating--",this.targetId].join("")),STORM.UTILS.attributelist.set(this.btn,{role:"button","aria-controls":this.targetId,"aria-expanded":"false"}),this.btn.addEventListener("click",function(t){this.toggle.call(this,t)}.bind(this),!1)},toggleAttributes:function(){this.open=!this.open,this.siblingBtns.forEach(function(t){STORM.UTILS.attributelist.toggle(t,"aria-expanded")})},toggleDocumentState:function(){this.classTarget.classList.remove(this.animatingClass),this.classTarget.classList.toggle(this.statusClass)},toggle:function(t){var s=this.classTarget.classList.contains(this.statusClass)?this.settings.delay:0;t&&(t.preventDefault(),t.stopPropagation()),this.classTarget.classList.add(this.animatingClass),window.setTimeout(function(){this.toggleAttributes(),this.toggleDocumentState(),!!this.settings.callback&&"function"==typeof this.settings.callback&&this.settings.callback.call(this)}.bind(this),s)}};return{init:s,reload:e,destroy:i}});