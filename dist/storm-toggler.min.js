module.exports=function(){"use strict";function t(t,s,i){a[s]=l(Object.create(c),{btn:t,targetId:(t.getAttribute("href")||t.getAttribute("data-target")).substr(1),settings:r({},n,i)},{classlist:require("dom-classlist"),attributelist:require("storm-attributelist")}),a[s].init()}function s(s,i){var e=[].slice.call(document.querySelectorAll(s));if(0===e.length)throw new Error("Toggler cannot be initialised, no augmentable elements found");return e.forEach(function(s,e){t(s,e,i)}),a}function i(s,i){[].slice.call(document.querySelectorAll(s)).forEach(function(s,e){a.filter(function(t){return t.btn===s}).length||t(s,a.length,i)})}function e(){a=[]}var a=[],n={delay:200,targetLocal:!1,callback:null},l=require("object-assign"),r=require("merge"),c={init:function(){this.targetElement=document.getElementById(this.targetId),this.classTarget=this.settings.targetLocal?this.targetElement.parentNode:document.documentElement,this.settings.targetLocal?(this.statusClass="active",this.animatingClass="animating"):(this.statusClass=["on--",this.targetId].join(""),this.animatingClass=["animating--",this.targetId].join("")),this.attributelist.set(this.btn,{role:"button","aria-controls":this.targetId,"aria-expanded":"false"}),this.attributelist.set(this.targetElement,{"aria-hidden":!0}),this.btn.addEventListener("click",function(t){this.toggle.call(this,t)}.bind(this),!1)},toggle:function(t){var s=this.classlist(this.classTarget).contains(this.statusClass)?this.settings.delay:0;t.preventDefault(),t.stopPropagation(),this.classlist(this.classTarget).add(this.animatingClass),window.setTimeout(function(){this.classlist(this.classTarget).remove(this.animatingClass),this.classlist(this.classTarget).toggle(this.statusClass),this.attributelist.toggle(this.btn,"aria-expanded"),this.attributelist.toggle(this.targetElement,"aria-hidden"),!!this.settings.callback&&"function"==typeof this.settings.callback&&this.settings.callback.call(this)}.bind(this),s)}};return{init:s,reload:i,destroy:e}}();