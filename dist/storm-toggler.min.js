!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.StormToggler=e()}(this,function(){"use strict";function t(t,e,i){n[e]=STORM.UTILS.assign(Object.create(l),{btn:t,targetId:(t.getAttribute("href")||t.getAttribute("data-target")).substr(1),settings:STORM.UTILS.merge({},a,i)}),n[e].init()}function e(e,i){var s=[].slice.call(document.querySelectorAll(e));if(0===s.length)throw new Error("Toggler cannot be initialised, no augmentable elements found");return s.forEach(function(e,s){t(e,s,i)}),n}function i(e,i){[].slice.call(document.querySelectorAll(e)).forEach(function(e,s){n.filter(function(t){return t.btn===e}).length||t(e,n.length,i)})}function s(){n=[]}var n=[],a={delay:200,targetLocal:!1,callback:null},l={init:function(){this.open=!1,this.targetElement=document.getElementById(this.targetId),this.classTarget=this.settings.targetLocal?this.targetElement.parentNode:document.documentElement,this.siblingBtns=[].slice.call(document.querySelectorAll('.js-toggle[href*="#'+this.targetId+'"], .js-toggle[data-target*="#'+this.targetId+'"]')),this.settings.targetLocal?(this.statusClass="active",this.animatingClass="animating"):(this.statusClass=["on--",this.targetId].join(""),this.animatingClass=["animating--",this.targetId].join("")),STORM.UTILS.attributelist.set(this.btn,{role:"button","aria-controls":this.targetId,"aria-expanded":"false"}),STORM.UTILS.attributelist.set(this.targetElement,{"aria-hidden":!0}),this.btn.addEventListener("click",function(t){this.toggle.call(this,t)}.bind(this),!1)},toggleAttributes:function(){this.open=!this.open,STORM.UTILS.attributelist.toggle(this.targetElement,"aria-hidden"),this.siblingBtns.forEach(function(t){STORM.UTILS.attributelist.toggle(t,"aria-expanded")})},toggleDocumentState:function(){STORM.UTILS.classlist(this.classTarget).remove(this.animatingClass),STORM.UTILS.classlist(this.classTarget).toggle(this.statusClass)},toggle:function(t){var e=STORM.UTILS.classlist(this.classTarget).contains(this.statusClass)?this.settings.delay:0;t&&(t.preventDefault(),t.stopPropagation()),STORM.UTILS.classlist(this.classTarget).add(this.animatingClass),window.setTimeout(function(){this.toggleAttributes(),this.toggleDocumentState(),!!this.settings.callback&&"function"==typeof this.settings.callback&&this.settings.callback.call(this)}.bind(this),e)}};return{init:e,reload:i,destroy:s}});