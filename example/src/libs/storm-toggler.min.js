!function(t,e){"object"==typeof exports?module.exports=e():t.StormToggler=e()}(this,function(){"use strict";function t(t,e,s){a[e]=Object.assign(Object.create(l),{btn:t,targetId:(t.getAttribute("href")||t.getAttribute("data-target")).substr(1),settings:Object.assign({},n,s)}),a[e].init()}function e(e,s){var i=[].slice.call(document.querySelectorAll(e));if(0===i.length)throw new Error("Toggler cannot be initialised, no augmentable elements found");return i.forEach(function(e,i){t(e,i,s)}),a}function s(e,s){[].slice.call(document.querySelectorAll(e)).forEach(function(e,i){a.filter(function(t){return t.btn===e}).length||t(e,a.length,s)})}function i(){a=[]}var a=[],n={delay:200,targetLocal:!1,callback:null},l={init:function(){this.open=!1,this.targetElement=document.getElementById(this.targetId),this.classTarget=this.settings.targetLocal?this.targetElement.parentNode:document.documentElement,this.siblingBtns=[].slice.call(document.querySelectorAll('.js-toggle[href*="#'+this.targetId+'"], .js-toggle[data-target*="#'+this.targetId+'"]')),this.settings.targetLocal?(this.statusClass="active",this.animatingClass="animating"):(this.statusClass=["on--",this.targetId].join(""),this.animatingClass=["animating--",this.targetId].join("")),STORM.UTILS.attributelist.set(this.btn,{role:"button","aria-controls":this.targetId,"aria-expanded":"false"}),STORM.UTILS.attributelist.set(this.targetElement,{"aria-hidden":!0}),this.btn.addEventListener("click",function(t){this.toggle.call(this,t)}.bind(this),!1)},toggleAttributes:function(){this.open=!this.open,STORM.UTILS.attributelist.toggle(this.targetElement,"aria-hidden"),this.siblingBtns.forEach(function(t){STORM.UTILS.attributelist.toggle(t,"aria-expanded")})},toggleDocumentState:function(){this.classTarget.classList.remove(this.animatingClass),this.classTarget.classList.toggle(this.statusClass)},toggle:function(t){var e=this.classTarget.classList.contains(this.statusClass)?this.settings.delay:0;t&&(t.preventDefault(),t.stopPropagation()),this.classTarget.classList.add(this.animatingClass),window.setTimeout(function(){this.toggleAttributes(),this.toggleDocumentState(),!!this.settings.callback&&"function"==typeof this.settings.callback&&this.settings.callback.call(this)}.bind(this),e)}};return{init:e,reload:s,destroy:i}});