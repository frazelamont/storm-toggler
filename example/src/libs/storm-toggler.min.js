!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.StormToggler=e()}(this,function(){"use strict";function t(t,e){var s,i=this;this.settings=r({},n,e),this.btn=t,this.targetId=(t.getAttribute("href")||t.getAttribute("data-target")).substr(1),this.targetElement=document.getElementById(this.targetId),this.classTarget=this.settings.targetLocal?this.targetElement.parentNode:document.documentElement,this.settings.targetLocal?(this.statusClass="active",this.animatingClass="animating"):(this.statusClass=["on--",this.targetId].join(""),this.animatingClass=["animating--",this.targetId].join("")),s=this.targetId,o.set(this.btn,{role:"button","aria-controls":s,"aria-expanded":"false"}),o.set(this.targetElement,{"aria-hidden":!0}),this.btn.addEventListener("click",function(t){i.toggle.call(i,t)},!1)}function e(e,s){var i=[].slice.call(document.querySelectorAll(e));if(0===i.length)throw new Error("Toggler cannot be initialised, no augmentable elements found");return a=i.map(function(e){return new t(e,s)})}function s(t,e){}function i(){a=[]}var a=[],n={delay:200,targetLocal:!1,callback:null},r=require("merge"),l=require("dom-classlist"),o=require("storm-attributelist");return t.prototype.toggle=function(t){var e=this,s=l(this.classTarget).contains(this.statusClass)?this.settings.delay:0;t.preventDefault(),t.stopPropagation(),l(this.classTarget).add(this.animatingClass),window.setTimeout(function(){l(this.classTarget).remove(this.animatingClass),l(this.classTarget).toggle(this.statusClass),o.toggle(this.btn,"aria-expanded"),o.toggle(this.targetElement,"aria-hidden"),!!this.settings.callback&&"function"==typeof this.settings.callback&&this.settings.callback.call(e)}.bind(this),s)},{init:e,reload:s,destroy:i}});