module.exports=function(){"use strict";function t(t,e,i){a[e]=l(Object.create(g),{btn:t,targetId:(t.getAttribute("href")||t.getAttribute("data-target")).substr(1),settings:r({},n,i)}),a[e].init()}function e(e,i){var s=[].slice.call(document.querySelectorAll(e));if(0===s.length)throw new Error("Toggler cannot be initialised, no augmentable elements found");return s.forEach(function(e,s){t(e,s,i)}),a}function i(e,i){[].slice.call(document.querySelectorAll(e)).forEach(function(e,s){a.filter(function(t){return t.btn===e}).length||t(e,a.length,i)})}function s(){a=[]}var a=[],n={delay:200,targetLocal:!1,callback:null},l=require("object-assign"),r=require("merge"),o=require("dom-classlist"),c=require("storm-attributelist"),g={init:function(){this.targetElement=document.getElementById(this.targetId),this.classTarget=this.settings.targetLocal?this.targetElement.parentNode:document.documentElement,this.settings.targetLocal?(this.statusClass="active",this.animatingClass="animating"):(this.statusClass=["on--",this.targetId].join(""),this.animatingClass=["animating--",this.targetId].join("")),c.set(this.btn,{role:"button","aria-controls":this.targetId,"aria-expanded":"false"}),c.set(this.targetElement,{"aria-hidden":!0}),this.btn.addEventListener("click",function(t){this.toggle.call(this,t)}.bind(this),!1)},toggle:function(t){var e=o(this.classTarget).contains(this.statusClass)?this.settings.delay:0;t.preventDefault(),t.stopPropagation(),o(this.classTarget).add(this.animatingClass),window.setTimeout(function(){o(this.classTarget).remove(this.animatingClass),o(this.classTarget).toggle(this.statusClass),c.toggle(this.btn,"aria-expanded"),c.toggle(this.targetElement,"aria-hidden"),!!this.settings.callback&&"function"==typeof this.settings.callback&&this.settings.callback.call(this)}.bind(this),e)}};return{init:e,reload:i,destroy:s}}();